Security Token Service
Federation:
    Active Directory, Uses SAML Security Assertion Markup Language
	Allows access to one domain (AWS) based on membership roles in another domain (AD)
Identity Broker:
	Allows you to take identity with one service and federate it with another (Okta)
Identity Store:
	Services like AD, Facebook, Gmail
Scenario:
	1) User enters username and password
	2) Application calls Identity Broker (Okta) and it captures un + pw
	3) Identity broker validates un + pw with existing LDAP directory
	4) Identity broker calls GetFederationToken function using IAM credentials. The call for temp creds must reference existing IAM policy and 1-36 hr duration
	5) STS confirms IAM policy allowed by IAM user gives permission to create new tokens and returns 4 values:
		a) access key
		b) secret access key
		c) token
		d) duration (token life)
	6) Identity broker returns temp creds from STS to original application
	7) Data storage part of original app uses STS creds to make S3 requests
	8) S3 uses IAM to validate STS creds
	9) IAM authorizes s3 to perform requested action
	
Logging:
	Read white paper: "Security at Scale: Logging in AWS"
	Remember ISO 27001, PCI DSS, FedRamp, HIPAA, and other security standards with common logging reqs
	Control access with: MFA delete on object, S3 bucket policies, IAM policies to restrict users/groups/roles/policies
	AWS CloudTrail, Config, CloudWatch, VPC Flow logs are main AWS services
	CloudWatch monitors performance, CloudTrail monitors API calls, Config records env state and notifies of changes

Security Groups are config of the firewall of the hypervisor
Physical interface -> Firewall -> Customer1 Sec Group -> Virtual Inteface -> Hypervisor -> Customer 1 services like EC2 virtual instances
Virtual Instances are 100% customer responsibility and they have root access to it
Memory scrubbing automatically occurs setting all block storage to 0s before allowing another customer use
HVM (Hardware Virtual Machine) over PV (ParaVirtualization) where possible. PV no longer quicker and isolated by layers Guest OS on layer 1, apps layer 3. HVM guests fully virtualized and not aware sharing processing time.
AWS admins have access to hypervisor host machines which run virtual guest machines

Tenancy field on 3. Configure Instance ec2 setup
Dedicated Instances run in VPC on hardware dedicated to a single customer (other non-dedicated instances by same customer may end up in same hardware)
Dedicated Hosts give you additional visibility on hardware each host is and satisfies licensing, regulatory, compliance reqs. Can see sockets, cores, host id, etc. targeted placement, affinity between host and instance

AWS Systems Manager EC2 Run Command - EC2 Role for Systems Manager in IAM
Run Command has some defaults, even for windows PITA to login and dont need 3389 rdp security group rule, and also shows AWS cli equiv at bottom of SSM UI
Can run commands on list of instances based on instance tags or selecting manually
SSM agent needs to be installed and role allowing on managed instances and can be on prem too

Parameter Store - Under EC2 left pane bottom Systems Manager Shared Resources
e.g. Adobe License Key using KMS encryption that can be applied elsewhere as single object, call in lambda CF etc. 
Confidential information store - pw, db connection strings, license codes, etc.
Systems Manager Parameter Store compatible with ec2, ec2 run command, lambda, CloudFormation